## Настройка домена 

ДНС сервер домена отвечает за то, откуда будут 
браться текстовые записи домена. 

У домена есть несколько типов записей.
Самый важный из них это **A - запись**. А - запись 
отвечает за ip адрес, куда будет направляться запрос
по этому домену. 

```text
Как правило, текстовые записи домена настраиваются 
у регистратора домена, но в случае, еслт DNS сервера домена
были изменены, A - записи следует искать по адресу
DNS сервера. 
```

[Подробнее](https://help.r01.ru/dns/faq/types_records.html)

### Взаимодействие сети 

Вводя в адресную строку адрес домнена, информация об
этом домене сначала ищется в локальном файле hosts, 
затем информация запрашивается у твоего провайдера,
в случае если провайдер знает о домене, он отдает
url dns сервера домена. 

Далее запрос уходит на этот url(dns сервер), который
отдает текстовый файл со всеми текстовыми записями домена.

Далее браузер сопоставлет вводимый url с необходимой 
A - записью и смотрит на ее IP. После чего отсылает
запрос по этому IP.

```text
На 1 IP может ссылаться неограниченное количество 
доменов, а так же поддомен может ссылаться на 
совершенно другой IP.
```

## Сервер 

Сервера бывают двух типов: 
KVM и OpenVZ - это типы виртуализации. 

**KVM** - это виртуализация, в которой каждая нода
(условно, кусок большого сервера), принадлежит тебе 
и только тебе, твои ресурсы не могут быть распределены
другим(виртуализация на уровне железа).

**OpenVZ** - виртуализация на уровне софта, твои
ресурсы могут быть заняты в случае высокой нагрузки
большого сервера.

Рекомендуется использовать всегда KVM виртуализацию,
помимо очевидных преимуществ, kVM отличается 
наличием масштабируемости(при росте нагрузки на проект
можно увеличить ресурсы сервера).
 
### Практика

Чтобы подключиться к удаленному серверу, обычно
используется протокол **SSH**, также распространен
способ подключения через **VNC**, но как правило
программистам он не нужен.

Чтобы подключиться к удаленному серверу мы используем
команду 
```bash
ssh root@149.154.67.71
```
Где, `root` - это имя пользователя на удаленной машине,
`149.154.67.71` - ip адрес или доменное имя сервера 

### Необходимый софт

Первым делом на сервер необходимо установить

- nano - текстовый редактор
- mc - файловый менеджер
- htop - системный монитор
- language-pack-ru - русификация консоли и поддержка
кириллицы
  
  
### Первые шаги

Первым делом в настройке нового сервера необходимо
создать пользователя отличного от root. Под которым
в дальнейшем мы и будем работать.
```text
Как правило, при "взрослой" настройке сервера 
авторизацию по ssh от пользователя root вообще запрещают
```
Для создания пользователя используем команду 
```bash
useradd username 
```

Далее необходимо выдать пользователю доступ к sudo.
```bash
usermod -aG sudo username
```

Далее необходимо создать папку пользователя в директории
/home/

`mkdir /home/username`

и поменять владельца у этой папки 

`chown username:usergroup userdir`

где username - имя пользователя, usergroup - группа
пользователя(по умолчанию имя пользователя), userdir -
домашняя директория пользователя.

